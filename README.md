# RELang
RELang is a domain-specific language to describe a memory interface to binary executables and transpiles to C++. The acronym _RELang_ stands for _Reverse Engineering Language_.   
It is based upon the ANTLR4 parser generator, is written in Golang and its syntax looks very similar to C++.   
It was primilarily invented for and tested with code generated by the MSVC compiler.

## Motivation
Writing binary interfaces for existing applications you don't have the source of can be annoying with C++ and either needs a lot of boilerplate code or more generic approaches break auto-completion in IDEs.   
Therefore, it makes sense to create a small domain-specific language that lets you define binary interfaces and generates C++ code that can be easily embedded.

## Key Features
* Function body generation for memory address-based function calls
* Automatic pad generation for unknown memory regions in struct
* Support for virtual methods
* Strong type system with fixed-size types only

## Examples
```cpp
import "Element.relang"

class Vehicle : Element // Inherits from class 'Element'
{
    // Defines a function at the absolute address 0xBEAF
    void Fix() @ 0xBEAF;

    // Defines an attribute at offset 4
    float32 health @ 0x8;

    // Based on the size and alignment of the previous attribute
    // this attribute is automatically defined to be at offset 8
    ModelInfo* model;

    // Line comment
    /* Block comment */
};
```
transpiles to something like:
```cpp
#include "Element.h"

class Vehicle : public Element
{
public:
    inline unsigned long Fix()
    {
        using Fix_t = unsigned long(__thiscall *)(Vehicle*);
        auto f = reinterpret_cast<Fix_t>(0xBEAF);
        return f(this);
    }

private:
    char pad1[4]; // offset 0
public:
    float health; // offset 4
    class ModelInfo* model; // offset 8
};
```

## Building
To be able to build the project, you need:
* __golang__ >= 1.11
* __Java__ runtime (only required if you intend to make changes to the grammar)
* __Node.js__ and globally installed __gulp__ (only required for more convenience)

### Compiling the examples
The following command will transpile `examples/Vehicle.relang` to `examples/out/Vehicle.h`.
```shell
go run cmd/relang.go -p examples/Vehicle.relang -o examples/out/Vehicle.h
```
